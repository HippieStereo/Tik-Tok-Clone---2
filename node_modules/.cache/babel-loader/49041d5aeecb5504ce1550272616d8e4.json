{"ast":null,"code":"import _regeneratorRuntime from\"/Users/HippieStereoBroo/Hippie-Stereo/CODE/GIT/Tik-Tok-Clone---2/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/HippieStereoBroo/Hippie-Stereo/CODE/GIT/Tik-Tok-Clone---2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/HippieStereoBroo/Hippie-Stereo/CODE/GIT/Tik-Tok-Clone---2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import FollowersColumn from\"../components/FollowersColumn\";import axios from\"axios\";import{useEffect,useState}from\"react\";import Card from\"../components/Card\";import MiniCard from\"../components/MiniCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userToToggle=_useState4[0],setUserToToggle=_useState4[1];var descendingUsers;var topFiveFollowing;var topFiveNotFollowing;var addData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/.netlify/functions/AddData',{headers:{'Content-Type':'application/json'}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function addData(){return _ref.apply(this,arguments);};}();var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('/.netlify/functions/Posts',{headers:{'Content-Type':'application/json'}});case 2:results=_context2.sent;setUsers(results.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();//toggle user from followed to unfollowed\nif(userToToggle){var newValue=userToToggle.is_followed?false:true;var data={is_followed:newValue};axios.put('/.netlify/functions/Edit',{userId:userToToggle.id,data:data}).then(function(json){return console.log(json);}).catch(function(err){return console.error('error:'+err);}).then(function(){return fetchData();});setUserToToggle(null);fetchData();}useEffect(function(){addData();fetchData();},[]);if(users){descendingUsers=Object.values(users[1]).sort(function(a,b){return a.id<b.id?1:-1;});var following=Object.values(users[1]).filter(function(user){return user.is_followed;});var descendingFollowing=following.sort(function(a,b){return a.likes<b.likes?1:-1;});topFiveFollowing=descendingFollowing.slice(0,5);var notFollowing=Object.values(users[1]).filter(function(user){return user.is_followed===false;});var descendingNotFollowing=notFollowing.sort(function(a,b){return a.likes<b.likes?1:-1;});topFiveNotFollowing=descendingNotFollowing.slice(0,5);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(FollowersColumn,{users:topFiveFollowing}),descendingUsers&&/*#__PURE__*/_jsx(\"div\",{className:\"feed\",children:descendingUsers.map(function(descendingUser,index){return/*#__PURE__*/_jsx(Card,{user:descendingUser,toggleFollow:function toggleFollow(userToToggle){return setUserToToggle(userToToggle);}},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"suggested-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"suggested\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"bold\",children:\"Suggested accounts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"break\"}),topFiveNotFollowing&&topFiveNotFollowing.map(function(notFollowingUser,index){return/*#__PURE__*/_jsx(MiniCard,{user:notFollowingUser,toggleFollow:function toggleFollow(userToToggle){return setUserToToggle(userToToggle);}},index);})]})})})]})});};export default Home;","map":{"version":3,"sources":["/Users/HippieStereoBroo/Hippie-Stereo/CODE/GIT/Tik-Tok-Clone---2/src/pages/Home.js"],"names":["FollowersColumn","axios","useEffect","useState","Card","MiniCard","Home","users","setUsers","userToToggle","setUserToToggle","descendingUsers","topFiveFollowing","topFiveNotFollowing","addData","post","headers","fetchData","get","results","data","newValue","is_followed","put","userId","id","then","json","console","log","catch","err","error","Object","values","sort","a","b","following","filter","user","descendingFollowing","likes","slice","notFollowing","descendingNotFollowing","map","descendingUser","index","notFollowingUser"],"mappings":"sbAAA,MAAOA,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,SAAR,CAAmBC,QAAnB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,IAAP,KAAiB,oBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,C,6IAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAEf,cAA0BH,QAAQ,EAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAAwCL,QAAQ,EAAhD,yCAAOM,YAAP,eAAqBC,eAArB,eACA,GAAIC,CAAAA,eAAJ,CACA,GAAIC,CAAAA,gBAAJ,CACA,GAAIC,CAAAA,mBAAJ,CAEA,GAAMC,CAAAA,OAAO,0FAAG,yJAENb,CAAAA,KAAK,CAACc,IAAN,CAAW,6BAAX,CACF,CAACC,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAAV,CADE,CAFM,uDAAH,kBAAPF,CAAAA,OAAO,0CAAb,CAQA,GAAMG,CAAAA,SAAS,2FAAG,2KAEQhB,CAAAA,KAAK,CAACiB,GAAN,CAClB,2BADkB,CAElB,CAACF,OAAO,CAAE,CAAC,eAAgB,kBAAjB,CAAV,CAFkB,CAFR,QAERG,OAFQ,gBAOdX,QAAQ,CAACW,OAAO,CAACC,IAAT,CAAR,CAPc,wDAAH,kBAATH,CAAAA,SAAS,2CAAf,CAWA;AACA,GAAIR,YAAJ,CAAkB,CACd,GAAMY,CAAAA,QAAQ,CAAGZ,YAAY,CAACa,WAAb,CAA2B,KAA3B,CAAmC,IAApD,CACA,GAAMF,CAAAA,IAAI,CAAG,CAACE,WAAW,CAAED,QAAd,CAAb,CAEApB,KAAK,CAACsB,GAAN,CAAU,0BAAV,CAAsC,CAACC,MAAM,CAAEf,YAAY,CAACgB,EAAtB,CAA0BL,IAAI,CAAEA,IAAhC,CAAtC,EACKM,IADL,CACU,SAAAC,IAAI,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ,CAAJ,EADd,EAEKG,KAFL,CAEW,SAAAC,GAAG,QAAIH,CAAAA,OAAO,CAACI,KAAR,CAAc,SAAWD,GAAzB,CAAJ,EAFd,EAGKL,IAHL,CAGU,iBAAMT,CAAAA,SAAS,EAAf,EAHV,EAKAP,eAAe,CAAC,IAAD,CAAf,CAEAO,SAAS,GACZ,CAEDf,SAAS,CAAC,UAAM,CACZY,OAAO,GACPG,SAAS,GACZ,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAIV,KAAJ,CAAU,CACNI,eAAe,CAAGsB,MAAM,CAACC,MAAP,CAAc3B,KAAK,CAAC,CAAD,CAAnB,EAAwB4B,IAAxB,CAA6B,SAACC,CAAD,CAAGC,CAAH,QAASD,CAAAA,CAAC,CAACX,EAAF,CAAOY,CAAC,CAACZ,EAAT,CAAc,CAAd,CAAkB,CAAC,CAA5B,EAA7B,CAAlB,CAEA,GAAMa,CAAAA,SAAS,CAAGL,MAAM,CAACC,MAAP,CAAc3B,KAAK,CAAC,CAAD,CAAnB,EAAwBgC,MAAxB,CAA+B,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAAClB,WAAT,EAAnC,CAAlB,CACA,GAAMmB,CAAAA,mBAAmB,CAAGH,SAAS,CAACH,IAAV,CAAe,SAACC,CAAD,CAAGC,CAAH,QAASD,CAAAA,CAAC,CAACM,KAAF,CAAUL,CAAC,CAACK,KAAZ,CAAoB,CAApB,CAAwB,CAAC,CAAlC,EAAf,CAA5B,CACA9B,gBAAgB,CAAG6B,mBAAmB,CAACE,KAApB,CAA0B,CAA1B,CAA4B,CAA5B,CAAnB,CAEA,GAAMC,CAAAA,YAAY,CAAGX,MAAM,CAACC,MAAP,CAAc3B,KAAK,CAAC,CAAD,CAAnB,EAAwBgC,MAAxB,CAA+B,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAAClB,WAAL,GAAqB,KAAzB,EAAnC,CAArB,CACA,GAAMuB,CAAAA,sBAAsB,CAAGD,YAAY,CAACT,IAAb,CAAkB,SAACC,CAAD,CAAGC,CAAH,QAASD,CAAAA,CAAC,CAACM,KAAF,CAAUL,CAAC,CAACK,KAAZ,CAAoB,CAApB,CAAwB,CAAC,CAAlC,EAAlB,CAA/B,CACA7B,mBAAmB,CAAGgC,sBAAsB,CAACF,KAAvB,CAA6B,CAA7B,CAA+B,CAA/B,CAAtB,CACH,CAED,mBACI,sCACI,aAAK,SAAS,CAAC,WAAf,wBACG,KAAC,eAAD,EAAiB,KAAK,CAAE/B,gBAAxB,EADH,CAEKD,eAAe,eACb,YAAK,SAAS,CAAC,MAAf,UACKA,eAAe,CAACmC,GAAhB,CAAoB,SAACC,cAAD,CAAiBC,KAAjB,qBACjB,KAAC,IAAD,EAEI,IAAI,CAAED,cAFV,CAGI,YAAY,CAAE,sBAAAtC,YAAY,QAAIC,CAAAA,eAAe,CAACD,YAAD,CAAnB,EAH9B,EACSuC,KADT,CADiB,EAApB,CADL,EAHP,cAaI,YAAK,SAAS,CAAC,eAAf,uBACI,YAAK,SAAS,CAAC,SAAf,uBACI,aAAK,SAAS,CAAC,WAAf,wBACI,WAAI,SAAS,CAAC,MAAd,gCADJ,cAEI,YAAK,SAAS,CAAC,OAAf,EAFJ,CAGKnC,mBAAmB,EAAIA,mBAAmB,CAACiC,GAApB,CAAwB,SAACG,gBAAD,CAAmBD,KAAnB,qBAC5C,KAAC,QAAD,EAEI,IAAI,CAAEC,gBAFV,CAGI,YAAY,CAAE,sBAAAxC,YAAY,QAAIC,CAAAA,eAAe,CAACD,YAAD,CAAnB,EAH9B,EACSuC,KADT,CAD4C,EAAxB,CAH5B,GADJ,EADJ,EAbJ,GADJ,EADJ,CAiCH,CA5FD,CA8FA,cAAe1C,CAAAA,IAAf","sourcesContent":["import FollowersColumn from \"../components/FollowersColumn\";\nimport axios from \"axios\";\nimport {useEffect, useState} from \"react\";\nimport Card from \"../components/Card\";\nimport MiniCard from \"../components/MiniCard\";\n\nconst Home = () => {\n\n    const [users, setUsers] = useState();\n    const [userToToggle, setUserToToggle] = useState();\n    let descendingUsers;\n    let topFiveFollowing;\n    let topFiveNotFollowing;\n\n    const addData = async () => {\n\n        await axios.post('/.netlify/functions/AddData',\n            {headers: {'Content-Type': 'application/json'}}\n            );\n\n    }\n\n    const fetchData = async () => {\n\n        const results = await axios.get(\n            '/.netlify/functions/Posts',\n            {headers: {'Content-Type': 'application/json'}}\n            );\n\n        setUsers(results.data);\n\n    }\n\n    //toggle user from followed to unfollowed\n    if (userToToggle) {\n        const newValue = userToToggle.is_followed ? false : true\n        const data = {is_followed: newValue}\n\n        axios.put('/.netlify/functions/Edit', {userId: userToToggle.id, data: data })\n            .then(json => console.log(json))\n            .catch(err => console.error('error:' + err))\n            .then(() => fetchData());\n\n        setUserToToggle(null);\n\n        fetchData();\n    }\n\n    useEffect(() => {\n        addData();\n        fetchData();\n    }, []);\n\n    if (users){\n        descendingUsers = Object.values(users[1]).sort((a,b) => a.id < b.id ? 1 : -1);\n\n        const following = Object.values(users[1]).filter(user => user.is_followed);\n        const descendingFollowing = following.sort((a,b) => a.likes < b.likes ? 1 : -1);\n        topFiveFollowing = descendingFollowing.slice(0,5);\n\n        const notFollowing = Object.values(users[1]).filter(user => user.is_followed === false);\n        const descendingNotFollowing = notFollowing.sort((a,b) => a.likes < b.likes ? 1 : -1);\n        topFiveNotFollowing = descendingNotFollowing.slice(0,5);\n    }\n\n    return (\n        <>\n            <div className='container'>\n               <FollowersColumn users={topFiveFollowing}/>\n                {descendingUsers && (\n                   <div className='feed'>\n                       {descendingUsers.map((descendingUser, index) => (\n                           <Card\n                               key={index}\n                               user={descendingUser}\n                               toggleFollow={userToToggle => setUserToToggle(userToToggle)}\n                           />\n                       ))}\n                    </div>\n                )}\n                <div className=\"suggested-box\">\n                    <div className=\"section\">\n                        <div className=\"suggested\">\n                            <h2 className=\"bold\">Suggested accounts</h2>\n                            <div className=\"break\" />\n                            {topFiveNotFollowing && topFiveNotFollowing.map((notFollowingUser, index) => (\n                                <MiniCard\n                                    key={index}\n                                    user={notFollowingUser}\n                                    toggleFollow={userToToggle => setUserToToggle(userToToggle)}\n                                />\n                            ))}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}